id: links_import_link_nodes_csv_fi
label: Import links from old site to nodes fi
migration_group: infofinland_links
dependencies:
  enforced:
    module:
      - infofinland_migrate

destination:
  plugin: 'entity:node'
source:
  plugin: csv
  path: modules/custom/infofinland_migrate/sources/migrate_link_nodes.csv
  # change if not unique enough
  delimiter: ','
  ids: [id]
process:
  type:
    plugin: default_value
    default_value: link
  langcode: kieli
  default_langcode:
    plugin: default_value
    default_value: true
  title: Linkin Nimi
  # for finding links
  field_link_description: Linkin Kuvaus
  # is hallintaorg still needed?
  # hallintaorg: Linkin hallintaorg
  field_link_target_site: Kohde (Organisaatio)
  # migration map reference to paragraph language_link
  pseudo_paragraph_field:
    plugin: migration_lookup
    migration: links_import_link_paragraphs_csv
    source: id
  field_links:
    plugin: extract
    source: '@pseudo_paragraph_field'
    index:
      - '0'
  revision_id:
    plugin: extract
    source: '@pseudo_paragraph_field'
    index:
      - '1'


